{% extends "base.html" %}
{% block title %}Mes exercices — Tighri{% endblock %}
{% block content %}
<div class="container py-4" style="max-width:900px">
  <h1 class="h5 mb-3"><i class="fa-solid fa-dumbbell me-2"></i>Mes exercices</h1>
  {% if assignments %}
    <ul class="list-group">
      {% for a in assignments %}
        {% set ex = a.exercise or None %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <div><strong>{{ ex.title if ex else 'Exercice' }}</strong>
              {% if a.due_date %}<span class="text-muted"> — dû {{ a.due_date }}</span>{% endif %}
            </div>
            <div class="small text-muted">{{ ex.content_format if ex else '' }}</div>
            {% if ex and ex.file_url %}<a href="{{ ex.file_url }}" target="_blank">Télécharger</a>{% endif %}
            {% if ex and ex.text_content %}<div class="small mt-1">{{ ex.text_content }}</div>{% endif %}
          </div>
          <a class="btn btn-sm btn-primary" href="{{ url_for('patient_exercise_detail', assign_id=a.id) }}">Ouvrir</a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted">Aucun exercice.</p>
  {% endif %}
</div>
{% endblock %}
