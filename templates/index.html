<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tighri - Prendre rendez-vous avec un professionnel</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <!-- ta feuille mobile spécifique -->
  <link rel="stylesheet" href="{{ url_for('static', filename='mobile.css') }}">
  <style>
    :root{
      --primary:#8B5CF6; --primary-dark:#6D28D9;
      --ink:#2d1a47; --muted:#4B3869;
      --bg:#f7f5fa; --card:#fff;
      --shadow:0 2px 12px rgba(139,92,246,0.1);
      --nav-h:70px;
    }
    html{scroll-behavior:smooth}
    *{box-sizing:border-box}
    body{
      font-family:'Montserrat',Arial,sans-serif;
      background:var(--bg); color:var(--ink);
      margin:0; padding-top:var(--nav-h);
    }

    /* NAVBAR */
    .navbar{
      position:fixed; top:0; left:0; right:0; height:var(--nav-h);
      background:rgba(255,255,255,0.95); backdrop-filter:blur(10px);
      z-index:1000; border-bottom:1px solid rgba(139,92,246,.12);
    }
    .nav-container{max-width:1200px; margin:0 auto; height:100%;
      display:flex; align-items:center; justify-content:space-between; padding:0 1rem;}
    .nav-logo{color:var(--primary); font-size:1.6rem; font-weight:700; text-decoration:none}
    .nav-menu{display:flex; gap:1.25rem; list-style:none; margin:0; padding:0}
    .nav-menu a{color:#4B3869; text-decoration:none; font-weight:600}
    .nav-menu a:hover{color:var(--primary)}
    .nav-auth{display:flex; gap:.6rem}
    .btn{display:inline-block; padding:.5rem 1rem; border-radius:999px; text-decoration:none; font-weight:700}
    .btn-outline{color:var(--primary); border:2px solid var(--primary); background:#fff}
    .btn-outline:hover{background:#f2ecff}
    .btn-solid{background:var(--primary); color:#fff; border:2px solid var(--primary)}
    .btn-solid:hover{background:var(--primary-dark); border-color:var(--primary-dark)}

    /* HEADER */
    header{
      background:linear-gradient(90deg, #8B5CF6 0%, #6D28D9 100%);
      color:#fff; text-align:center; padding:6.5rem 1rem 2rem;
    }
    header h1{margin:0 0 .5rem; font-size:3rem}
    header p{margin:0; font-size:1.15rem; max-width:760px; margin-inline:auto}

    /* SEARCH */
    .search-bar{display:flex; justify-content:center; gap:.5rem; margin:1.5rem auto 0; max-width:680px; padding:0 1rem}
    .search-bar input{
      flex:1; padding:1rem 1.2rem; border:1.5px solid var(--primary);
      border-radius:14px; font-size:1rem; outline:none; min-width:0;
    }
    .search-bar button{
      padding:1rem 1.25rem; border-radius:14px; border:0;
      background:var(--primary); color:#fff; font-weight:700; cursor:pointer;
    }
    .search-bar button:hover{background:var(--primary-dark)}

    /* SECTIONS */
    .sections{max-width:1200px; margin:2.25rem auto; padding:0 1rem;
      display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:1rem;}
    .section{
      background:var(--card); border-radius:18px; box-shadow:var(--shadow);
      padding:1.75rem; text-align:center;
    }
    .section h2{color:var(--primary); margin:.25rem 0 .75rem; font-size:1.5rem}
    .section p{color:var(--muted); margin:0 0 1rem}
    .section a{display:inline-block; background:var(--primary); color:#fff;
      padding:.9rem 1.25rem; border-radius:12px; text-decoration:none; font-weight:700}
    .section a:hover{background:var(--primary-dark)}

    /* FEATURED */
    .featured{max-width:1200px; margin:0 auto 3rem; padding:0 1rem}
    .featured h3{color:#6D28D9; text-align:center; font-size:2rem; margin:0 0 1.25rem}
    .professionals{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem}
    .card{background:#fff; border-radius:14px; box-shadow:var(--shadow); overflow:hidden}
    .thumb-box{position:relative; width:100%; height:200px; background:linear-gradient(180deg,#eee,#ddd)}
    .thumb-img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center center}
    .card-body{padding:1rem; text-align:center}
    .card-body h4{margin:.4rem 0 .15rem; color:#6D28D9}
    .card-body p{margin:.2rem 0; color:#4B3869; font-size:.96rem}
    .card-body a{color:var(--primary); text-decoration:none; font-weight:600}
    .card-body a:hover{text-decoration:underline}

    /* ABOUT */
    .about-section{background:#fff; padding:3rem 1rem; margin:3rem 0}
    .about-container{max-width:1100px; margin:0 auto; text-align:center}
    .about-section h2{color:var(--primary); font-size:2.25rem; margin:0 0 .75rem}
    .about-section p{color:var(--muted); font-size:1.05rem; line-height:1.75; max-width:820px; margin:0 auto 1rem}

    /* SERVICES */
    .services-section{padding:3rem 1rem; background:#f7f5fa}
    .services-container{max-width:1100px; margin:0 auto}
    .services-section h2{color:var(--primary); text-align:center; font-size:2.25rem; margin:0 0 2rem}
    .services-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem}
    .service-card{background:#fff; padding:1.4rem; border-radius:14px; box-shadow:var(--shadow); text-align:center}
    .service-card h3{color:#6D28D9; margin:.2rem 0 .6rem}
    .service-card p{color:var(--muted); margin:0}

    /* CONTACT */
    .contact-section{background:#8B5CF6; color:#fff; padding:3rem 1rem; text-align:center}
    .contact-container{max-width:800px; margin:0 auto}
    .contact-section h2{font-size:2.25rem; margin:0 0 .75rem}
    .contact-section p{font-size:1.05rem; margin:0 0 1.5rem; opacity:.95}
    .contact-info{display:flex; justify-content:center; gap:2rem; flex-wrap:wrap}
    .contact-item{display:flex; flex-direction:column; align-items:center; gap:.35rem}
    .contact-actions{display:flex; gap:.75rem; flex-wrap:wrap; justify-content:center; margin-top:1rem}
    .contact-btn{
      display:inline-flex; align-items:center; gap:.5rem; background:#fff; color:#6D28D9;
      border:2px solid #fff; padding:.8rem 1.2rem; border-radius:999px; text-decoration:none; font-weight:700;
      box-shadow:0 2px 8px rgba(139,92,246,.18);
    }
    .contact-btn:hover{transform:translateY(-2px); background:#f1e9ff; border-color:#fff}
    .contact-badge{display:inline-block; font-weight:700; padding:.3rem .7rem; border-radius:999px; background:#ffffff20; border:1px solid #ffffff50}

    /* FOOTER */
    footer{background:#2d1a47; color:#fff; text-align:center; padding:1.5rem}

    /* Décalage d’ancre pour la navbar fixe */
    section, .anchor { scroll-margin-top: calc(var(--nav-h) + 10px); }

    /* Mobile */
    @media (max-width: 768px){
      header{padding:6rem 1rem 1.5rem}
      header h1{font-size:2rem}
      .search-bar{flex-direction:column}
      .search-bar button{width:100%}
      .nav-container{gap:.6rem; padding:0 .75rem}
      .nav-menu{flex-wrap:wrap; gap:.75rem; justify-content:center}
    }
    /* Téléphones compacts */
    @media (max-width: 480px){
      :root{ --nav-h:66px; }
      .thumb-box{height:180px}
    }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="navbar" role="navigation" aria-label="Navigation principale">
    <div class="nav-container">
      <a href="{{ url_for('index') }}" class="nav-logo">Tighri</a>
      <ul class="nav-menu">
        <!-- on pointe TOUJOURS vers les ancres de la page d’accueil -->
        <li><a href="{{ url_for('index') }}#about">À propos</a></li>
        <li><a href="{{ url_for('index') }}#services">Services</a></li>
        <li><a href="{{ url_for('index') }}#contact">Contact</a></li>
      </ul>
      <div class="nav-auth">
        {% if current_user.is_authenticated %}
          <a class="btn btn-outline" href="{{ url_for('my_appointments') }}">Mes rendez-vous</a>
          <a class="btn btn-solid" href="{{ url_for('logout') }}">Déconnexion</a>
        {% else %}
          <a class="btn btn-outline" href="{{ url_for('login') }}">Se connecter</a>
          <a class="btn btn-solid" href="{{ url_for('register') }}">S'inscrire</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <!-- HEADER -->
  <header class="anchor" id="home">
    <h1>Tighri</h1>
    <p>La plateforme marocaine pour prendre rendez-vous avec des psychologues, thérapeutes et coachs certifiés</p>
    <form class="search-bar" method="get" action="{{ url_for('professionals') }}">
      <input type="text" name="q" placeholder="Rechercher un professionnel, une spécialité, une ville...">
      <button type="submit">Rechercher</button>
    </form>
  </header>

  <!-- BLOCS RAPIDES -->
  <div class="sections">
    <div class="section">
      <h2>Espace Patient</h2>
      <p>Consultez les profils, prenez rendez-vous en cabinet, à domicile ou en vidéo avec des professionnels certifiés.</p>
      <a href="{{ url_for('register') }}">Je suis patient</a>
    </div>
    <div class="section">
      <h2>Espace Professionnel</h2>
      <p>Rejoignez Tighri pour proposer vos services et gérer vos rendez-vous en toute simplicité.</p>
      <a href="{{ url_for('professional_register') }}">Je suis professionnel</a>
    </div>
  </div>

  <!-- PROFESSIONNELS EN VEDETTE -->
  <div class="featured">
    <h3>Professionnels en vedette</h3>
    <div class="professionals">
      {% for professional in professionals %}
        <article class="card">
          <div class="thumb-box">
            <!-- proxy côté serveur + cache-buster (évite souci mobile) -->
            <img class="thumb-img"
                 src="{{ url_for('profile_photo', professional_id=professional.id) }}?v={{ professional.id }}"
                 alt="Photo de {{ professional.name|e }}"
                 referrerpolicy="no-referrer"
                 loading="eager" decoding="async">
          </div>
          <div class="card-body">
            <h4>{{ professional.name }}</h4>
            <p>{{ professional.specialty }}</p>
            <p>
              {% set d = professional.description or '' %}
              {{ d[:80] }}{% if d|length > 80 %}…{% endif %}
            </p>
            <a href="{{ url_for('professional_detail', professional_id=professional.id) }}">Voir le profil</a>
          </div>
        </article>
      {% endfor %}
    </div>
  </div>

  <!-- À PROPOS -->
  <section id="about" class="about-section">
    <div class="about-container">
      <h2>À propos de Tighri</h2>
      <p>Tighri est la première plateforme marocaine dédiée à la santé mentale et au bien-être. Nous connectons patients et professionnels de la psychologie pour faciliter l'accès aux soins psychologiques de qualité.</p>
      <p>Notre mission est de démocratiser l'accès aux services de santé mentale au Maroc en mettant en relation des professionnels certifiés avec des patients dans un environnement de confiance et de sécurité.</p>
    </div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="services-section">
    <div class="services-container">
      <h2>Nos Services</h2>
      <div class="services-grid">
        <div class="service-card">
          <h3>Consultations en Cabinet</h3>
          <p>Prenez rendez-vous avec des professionnels dans leur cabinet pour des consultations en face à face.</p>
        </div>
        <div class="service-card">
          <h3>Consultations à Domicile</h3>
          <p>Certains professionnels se déplacent à votre domicile pour plus de confort et de discrétion.</p>
        </div>
        <div class="service-card">
          <h3>Consultations en Vidéo</h3>
          <p>Consultez en ligne depuis chez vous grâce à nos outils de visioconférence sécurisés.</p>
        </div>
        <div class="service-card">
          <h3>Gestion de Planning</h3>
          <p>Réservez vos créneaux en ligne et recevez des rappels automatiques de vos rendez-vous.</p>
        </div>
        <div class="service-card">
          <h3>Profils Vérifiés</h3>
          <p>Tous nos professionnels sont certifiés et leurs diplômes sont vérifiés par notre équipe.</p>
        </div>
        <div class="service-card">
          <h3>Support 24/7</h3>
          <p>Notre équipe est disponible pour vous accompagner à tout moment dans votre parcours.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="contact-section">
    <div class="contact-container">
      <h2>Nous contacter</h2>
      <p><strong>Bienvenue au Centre d'écoute et de conseil Tighri.</strong><br>Si vous avez besoin d'aide et de conseils gratuits, n'hésitez pas à nous contacter.</p>

      <div class="contact-info" style="margin-top:.75rem">
        <div class="contact-item">
          <strong>Email</strong>
          <span>contact@tighri.ma</span>
        </div>
        <div class="contact-item">
          <strong>Téléphone</strong>
          <span>06 63 40 01 90</span>
        </div>
        <div class="contact-item">
          <strong>WhatsApp</strong>
          <span class="contact-badge">Disponible</span>
        </div>
      </div>

      <div class="contact-actions">
        <a class="contact-btn" href="mailto:contact@tighri.ma?subject=Contact%20Tighri&body=Bonjour%20Tighri%2C">✉️ Contacter par e-mail</a>
        <a class="contact-btn" href="tel:+212663400190">📞 Appeler le <span>06 63 40 01 90</span></a>
        <a class="contact-btn" target="_blank" rel="noopener" href="https://wa.me/212663400190?text=Bonjour%20Tighri%2C%20j%E2%80%99ai%20besoin%20d%E2%80%99aide%20et%20de%20conseils.">💬 WhatsApp direct</a>
      </div>
    </div>
  </section>

  <footer>
    <p>&copy; 2024 Tighri. Tous droits réservés. | Plateforme de santé mentale au Maroc</p>
  </footer>
</body>
</html>
