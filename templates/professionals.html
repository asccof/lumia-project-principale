<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Professionnels - Tighri</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Montserrat',Arial,sans-serif;background:#f7f5fa;margin:0;color:#2d1a47}
    .navbar{background:rgba(255,255,255,.95);backdrop-filter:blur(10px);position:fixed;top:0;width:100%;z-index:1000;box-shadow:0 2px 10px rgba(139,92,246,.1)}
    .nav-container{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem}
    .nav-logo{color:#8B5CF6;font-size:1.8rem;font-weight:700;text-decoration:none}
    .nav-links{display:flex;gap:2rem}
    .nav-links a{color:#4B3869;text-decoration:none;font-weight:600;transition:color .2s}
    .nav-links a:hover{color:#8B5CF6}
    .container{max-width:1200px;margin:100px auto 2rem auto;padding:0 2rem}
    .page-header{background:#fff;border-radius:18px;box-shadow:0 2px 12px rgba(139,92,246,.08);padding:2rem;margin-bottom:2rem;text-align:center}
    .page-header h1{color:#8B5CF6;margin-bottom:1rem}
    .search-section{background:#fff;border-radius:18px;box-shadow:0 2px 12px rgba(139,92,246,.08);padding:2rem;margin-bottom:2rem}
    .search-form{display:grid;grid-template-columns:1fr 1fr 160px;gap:1rem;margin-bottom:1rem}
    .search-input{padding:.8rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem}
    .search-input:focus{outline:none;border-color:#8B5CF6}
    .search-btn{background:#8B5CF6;color:#fff;padding:.8rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:background .2s}
    .search-btn:hover{background:#6D28D9}
    .filters{display:flex;gap:.5rem;flex-wrap:wrap}
    .filter-btn{padding:.5rem 1rem;border:1px solid #e2e8f0;background:#fff;border-radius:20px;cursor:pointer;transition:all .2s;text-decoration:none;color:#4B3869}
    .filter-btn:hover,.filter-btn.active{background:#8B5CF6;color:#fff;border-color:#8B5CF6}
    .professionals-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:2rem}
    .professional-card{background:#fff;border-radius:18px;box-shadow:0 2px 12px rgba(139,92,246,.08);overflow:hidden;transition:transform .2s}
    .professional-card:hover{transform:translateY(-4px)}
    .professional-image{width:100%;height:200px;object-fit:cover}
    .professional-content{padding:1.5rem}
    .professional-name{color:#6D28D9;font-size:1.3rem;font-weight:700;margin-bottom:.2rem}
    .professional-specialty{color:#8B5CF6;font-weight:600;margin-bottom:.4rem}
    .professional-location{color:#4B3869;margin-bottom:.6rem}
    .professional-description{color:#4B3869;margin-bottom:1rem;line-height:1.5}
    .btn-book{width:100%;background:#8B5CF6;color:#fff;padding:.8rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:background .2s;text-decoration:none;display:block;text-align:center}
    .btn-book:hover{background:#6D28D9}
    .no-results{text-align:center;padding:3rem;background:#fff;border-radius:18px;box-shadow:0 2px 12px rgba(139,92,246,.08)}
    @media (max-width: 880px){.search-form{grid-template-columns:1fr}}
  </style>
</head>
<body>
<nav class="navbar">
  <div class="nav-container">
    <a href="/" class="nav-logo">Tighri</a>
    <div class="nav-links">
      <a href="/">Accueil</a>
      <a href="/professionals">Professionnels</a>
      {% if current_user.is_authenticated %}
        <a href="/my_appointments">Mes rendez-vous</a>
        <a href="/logout">D√©connexion</a>
      {% else %}
        <a href="/login">Connexion</a>
        <a href="/register">Inscription</a>
      {% endif %}
    </div>
  </div>
</nav>

<div class="container">
  <div class="page-header">
    <h1>Trouvez votre professionnel</h1>
    <p>Recherchez par nom, sp√©cialit√© ou ville.</p>
  </div>

  <div class="search-section">
    <form class="search-form" method="GET">
      <input type="text" name="q" placeholder="Nom, sp√©cialit√©, mots-cl√©s‚Ä¶" class="search-input" value="{{ search_query or '' }}">
      <input type="text" name="city" placeholder="Ville (ex: Casablanca)" class="search-input" value="{{ city or '' }}">
      <button type="submit" class="search-btn">üîç Rechercher</button>
    </form>

    <div class="filters">
      <a href="?specialty=all{% if search_query %}&q={{ search_query }}{% endif %}{% if city %}&city={{ city }}{% endif %}"
         class="filter-btn {% if specialty == 'all' %}active{% endif %}">Toutes les sp√©cialit√©s</a>
      {% for sp in specialties %}
        <a href="?specialty={{ sp }}{% if search_query %}&q={{ search_query }}{% endif %}{% if city %}&city={{ city }}{% endif %}"
           class="filter-btn {% if specialty == sp %}active{% endif %}">{{ sp }}</a>
      {% endfor %}
      <a href="/professionals" class="filter-btn">Voir tous</a>
    </div>
  </div>

  {% if professionals %}
    <div class="professionals-grid">
      {% for professional in professionals %}
        <div class="professional-card">
          <img src="{{ professional.image_url or 'https://via.placeholder.com/350x200/8B5CF6/FFFFFF?text=Professionnel' }}"
               alt="{{ professional.name }}" class="professional-image">
          <div class="professional-content">
            <h3 class="professional-name">{{ professional.name }}</h3>
            <p class="professional-specialty">{{ professional.specialty }}</p>
            <p class="professional-location">üìç {{ professional.address or professional.location or '' }}</p>
            <p class="professional-description">
              {{ professional.description[:110] }}{% if professional.description and professional.description|length > 110 %}‚Ä¶{% endif %}
            </p>
            <a href="/professional/{{ professional.id }}" class="btn-book">Voir le profil</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="no-results">
      <h3>Aucun professionnel trouv√©</h3>
      <p>Essayez de modifier vos crit√®res de recherche ou de consulter toutes les sp√©cialit√©s.</p>
    </div>
  {% endif %}
</div>
</body>
</html>
