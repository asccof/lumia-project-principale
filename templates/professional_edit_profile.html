{% extends "base.html" %}
{% block title %}Modifier mon profil professionnel{% endblock %}
{% block content %}
<div class="container py-4">
  <h1 class="h4 mb-3">Mon profil professionnel</h1>

  <form method="post">
    {% if csrf_token is defined %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">{% endif %}

    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Nom / Affichage public</label>
        <input name="name" class="form-control" value="{{ professional.name or '' }}" required>
      </div>

      <div class="col-md-6">
        <label class="form-label">Spécialité</label>
        <input name="specialty" class="form-control" value="{{ professional.specialty or '' }}" placeholder="Psychologue, Thérapeute, Coach…">
      </div>

      <div class="col-12">
        <label class="form-label">Description</label>
        <textarea name="description" rows="3" class="form-control" placeholder="Présentation…">{{ professional.description or '' }}</textarea>
      </div>

      <div class="col-md-6">
        <label class="form-label">Ville</label>
        <input name="location" class="form-control" value="{{ professional.location or '' }}" placeholder="Casablanca">
      </div>

      <div class="col-md-6">
        <label class="form-label">Adresse précise</label>
        <input name="address" class="form-control" value="{{ professional.address or '' }}" placeholder="N°, rue, quartier…">
      </div>

      <div class="col-md-6">
        <label class="form-label">Latitude</label>
        <input name="latitude" class="form-control" value="{{ professional.latitude if professional.latitude is not none else '' }}" placeholder="33.5">
      </div>

      <div class="col-md-6">
        <label class="form-label">Longitude</label>
        <input name="longitude" class="form-control" value="{{ professional.longitude if professional.longitude is not none else '' }}" placeholder="-7.6">
      </div>

      <!-- ✅ NOUVEAU : durée + délai (buffer), avec valeurs par défaut 45 / 15 -->
      <div class="col-md-6">
        <label class="form-label">Durée d’une séance (minutes)</label>
        <input name="consultation_duration_minutes" type="number" min="5" max="240" step="5" class="form-control"
               value="{{ professional.consultation_duration_minutes if professional.consultation_duration_minutes is not none else 45 }}">
        <div class="form-text">Par défaut 45 min. Utilisé pour le calcul des créneaux et des conflits.</div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Délai entre deux séances (minutes)</label>
        <input name="buffer_between_appointments_minutes" type="number" min="0" max="120" step="5" class="form-control"
               value="{{ professional.buffer_between_appointments_minutes if professional.buffer_between_appointments_minutes is not none else 15 }}">
        <div class="form-text">Par défaut 15 min. Ajouté après chaque séance.</div>
      </div>
      <!-- /NOUVEAU -->

    </div>

    <button class="btn btn-primary mt-3">Enregistrer</button>
    <a href="{{ url_for('professional_dashboard') }}" class="btn btn-outline-secondary mt-3">Annuler</a>
  </form>
</div>
{% endblock %}
