<!-- templates/admin_professional_order.html -->
{% extends "admin_base.html" %}
{% block title %}Classement des professionnels{% endblock %}

{% block content %}
<div class="container-fluid py-3">
  <h1 class="h4 mb-3">Classement des professionnels</h1>
  <p class="text-muted">
    Plus la valeur est <strong>petite</strong>, plus le professionnel sera affich√© en haut.
    Par d√©faut, c‚Äôest <code>1000</code>.
  </p>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for cat, msg in messages %}
        <div class="alert alert-{{ 'info' if cat=='message' else cat }} alert-dismissible fade show" role="alert">
          {{ msg }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="post">
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom</th>
            <th>Sp√©cialit√©</th>
            <th>Ville</th>
            <th>Priorit√©</th>
            <th>Statut</th>
          </tr>
        </thead>
        <tbody>
          {% for p in pros %}
          <tr>
            <td>{{ p.id }}</td>
            <td>{{ p.name }}</td>
            <td>{{ p.specialty or '-' }}</td>
            <td>{{ p.address or p.location or '-' }}</td>
            <td>
              <input type="number" class="form-control form-control-sm"
                     name="prio_{{ p.id }}"
                     value="{{ p.order_priority if p.order_priority is not none else 1000 }}"
                     min="0" step="1">
            </td>
            <td>
              {% if p.status == 'valide' %}
                <span class="badge bg-success">Valid√©</span>
              {% elif p.status == 'en_attente' %}
                <span class="badge bg-warning text-dark">En attente</span>
              {% else %}
                <span class="badge bg-secondary">{{ p.status }}</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="mt-3">
      <button class="btn btn-primary">üíæ Enregistrer</button>
      <a class="btn btn-outline-secondary" href="{{ url_for('admin.admin_dashboard') }}">‚Üê Retour</a>
    </div>
  </form>
</div>
{% endblock %}
