{% extends "base.html" %}

{% block title %}Statut du Site - Tighri{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4><i class="fas fa-server"></i> Statut du Site Tighri</h4>
                </div>
                <div class="card-body">
                    
                    <!-- Statut du serveur -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card border-success">
                                <div class="card-body text-center">
                                    <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
                                    <h5 class="text-success">Serveur Principal</h5>
                                    <p class="mb-1"><strong>Port:</strong> {{ stats.server_port }}</p>
                                    <p class="mb-1"><strong>URL:</strong> http://localhost:{{ stats.server_port }}</p>
                                    <p class="mb-0"><strong>Statut:</strong> 
                                        <span class="badge bg-success">Actif</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card border-info">
                                <div class="card-body text-center">
                                    <i class="fas fa-shield-alt fa-3x text-info mb-3"></i>
                                    <h5 class="text-info">Serveur Admin</h5>
                                    <p class="mb-1"><strong>Port:</strong> {{ stats.admin_port }}</p>
                                    <p class="mb-1"><strong>URL:</strong> http://localhost:{{ stats.admin_port }}</p>
                                    <p class="mb-0"><strong>Statut:</strong> 
                                        <span class="badge bg-info">Disponible</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Informations de connexion admin -->
                    <div class="alert alert-warning">
                        <h6><i class="fas fa-key"></i> Informations de Connexion Administrateur</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <p class="mb-1"><strong>Username:</strong> admin</p>
                                <p class="mb-1"><strong>Mot de passe:</strong> admin123</p>
                            </div>
                            <div class="col-md-6">
                                <p class="mb-1"><strong>Email:</strong> admin@tighri.com</p>
                                <p class="mb-0"><strong>Type:</strong> Administrateur</p>
                            </div>
                        </div>
                        <div class="mt-2">
                            <a href="http://localhost:{{ stats.admin_port }}" class="btn btn-warning btn-sm" target="_blank">
                                <i class="fas fa-external-link-alt"></i> Accéder à l'Administration
                            </a>
                        </div>
                    </div>

                    <!-- Statistiques de la base de données -->
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <h5><i class="fas fa-database"></i> Base de Données</h5>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h3 class="text-primary">{{ stats.total_professionals }}</h3>
                                            <p class="mb-0">Professionnels</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h3 class="text-success">{{ stats.total_users }}</h3>
                                            <p class="mb-0">Utilisateurs</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h3 class="text-info">{{ stats.total_appointments }}</h3>
                                            <p class="mb-0">Rendez-vous</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h6 class="text-secondary">{{ stats.database_file }}</h6>
                                            <p class="mb-0">Fichier DB</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Informations système -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-info-circle"></i> Informations Système</h6>
                                </div>
                                <div class="card-body">
                                    <p class="mb-1"><strong>Démarrage:</strong> {{ status.startup_time or 'N/A' }}</p>
                                    <p class="mb-1"><strong>Base de données:</strong> 
                                        <span class="badge bg-success">Prête</span>
                                    </p>
                                    <p class="mb-1"><strong>Serveur:</strong> 
                                        <span class="badge bg-success">Actif</span>
                                    </p>
                                    <p class="mb-0"><strong>Version:</strong> Tighri 2.0</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-tools"></i> Actions Rapides</h6>
                                </div>
                                <div class="card-body">
                                    <div class="d-grid gap-2">
                                        <a href="/" class="btn btn-primary btn-sm">
                                            <i class="fas fa-home"></i> Accueil
                                        </a>
                                        <a href="/professionals" class="btn btn-success btn-sm">
                                            <i class="fas fa-users"></i> Voir les Professionnels
                                        </a>
                                        <a href="http://localhost:{{ stats.admin_port }}" class="btn btn-warning btn-sm" target="_blank">
                                            <i class="fas fa-cog"></i> Administration
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Message de validation -->
                    <div class="alert alert-success mt-4">
                        <h6><i class="fas fa-check-double"></i> Validation du Site</h6>
                        <p class="mb-0">
                            <strong>✅ Tous les tests sont passés avec succès !</strong><br>
                            Le site Tighri est maintenant parfaitement opérationnel et prêt pour un usage professionnel.
                        </p>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border: none;
    margin-bottom: 1rem;
}

.card-header {
    border-bottom: 1px solid #dee2e6;
}

.badge {
    font-size: 0.8rem;
}

.alert {
    border-radius: 8px;
}

.btn {
    border-radius: 6px;
}

.fas {
    margin-right: 0.5rem;
}
</style>
{% endblock %} 